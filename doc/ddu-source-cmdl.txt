*ddu-source-cmdl.txt*	Command list source and kind for ddu.vim

Author:  KMNK
License: MIT License

Generated with Claude Code assistance.

==============================================================================
CONTENTS					*ddu-source-cmdl-contents*

Introduction		|ddu-source-cmdl-introduction|
Install			|ddu-source-cmdl-install|
Source			|ddu-source-cmdl-source|
  Source Params		|ddu-source-cmdl-source-params|
Kind			|ddu-source-cmdl-kind|
  Kind Actions		|ddu-source-cmdl-kind-actions|
Functions		|ddu-source-cmdl-functions|
Data Format		|ddu-source-cmdl-data-format|
Examples		|ddu-source-cmdl-examples|

==============================================================================
INTRODUCTION					*ddu-source-cmdl-introduction*

ddu-source-cmdl provides a ddu.vim source and kind for managing a personal
list of labeled Vim commands. Each entry consists of a human-readable label
and an Ex command. Entries are persisted to a JSON file and can be registered,
edited, deleted, and executed through the ddu.vim interface.

Requirements:
- ddu.vim    https://github.com/Shougo/ddu.vim
- denops.vim https://github.com/vim-denops/denops.vim

==============================================================================
INSTALL						*ddu-source-cmdl-install*

Install with your preferred plugin manager. Example with vim-plug: >

	Plug 'kmnk/ddu-source-cmdl'
<
Install with lazy.nvim: >

	{
	  'kmnk/ddu-source-cmdl',
	  dependencies = {
	    'Shougo/ddu.vim',
	    'vim-denops/denops.vim',
	  },
	}
<
==============================================================================
SOURCE						*ddu-source-cmdl-source*

Name: `cmdl`

Reads entries from the data file and enqueues them as ddu items.
Each item uses the entry label as `word` and carries |ddu-source-cmdl-kind|
action data.

------------------------------------------------------------------------------
SOURCE PARAMS				*ddu-source-cmdl-source-params*

highlights					*ddu-source-cmdl-param-highlights*
	A dictionary of Vim highlight group names used to colorize parts of
	each item. Set a key to `""` to disable that highlight.

	highlights.command			(default: "Comment")
		Applied to the command column (the part after the tab separator).
		Dimmed by default so the label stands out as the primary text.

	highlights.placeholder			(default: "Comment")
		Applied to the empty-state row shown when no entries are
		registered yet.

	Example â€” use a custom group for commands: >

		call ddu#start(#{
		\   sources: [#{
		\     name: 'cmdl',
		\     params: #{highlights: #{command: 'Statement'}},
		\   }],
		\ })
<

==============================================================================
KIND						*ddu-source-cmdl-kind*

Name: `cmdl`

Defines the following actions on cmdl items. Set `defaultAction` to
`"execute"` to run commands by pressing <CR>: >

	call ddu#start(#{
	\   sources: [#{name: 'cmdl'}],
	\   kindOptions: #{
	\     cmdl: #{defaultAction: 'execute'},
	\   },
	\ })
<
------------------------------------------------------------------------------
KIND ACTIONS				*ddu-source-cmdl-kind-actions*

						*ddu-source-cmdl-action-execute*
execute
	Execute the Vim Ex command of the selected entry.
	Iterates over all selected items.

						*ddu-source-cmdl-action-add*
add
	Prompt for a label and a command, then append a new entry to the
	data file. The currently selected item (if any) is ignored.
	Returns |ddu-source-cmdl-actionflag-refreshitems| on success.

						*ddu-source-cmdl-action-edit*
edit
	Prompt for a new label and command for the first selected entry.
	The current values are pre-filled in the input prompt. Press
	<Esc> or clear the field to cancel without saving.
	Returns |ddu-source-cmdl-actionflag-refreshitems| on success.

						*ddu-source-cmdl-action-delete*
delete
	Ask for confirmation and then delete all selected entries from
	the data file. Supports multi-item deletion.
	Returns |ddu-source-cmdl-actionflag-refreshitems| on success.

==============================================================================
FUNCTIONS					*ddu-source-cmdl-functions*

						*ddu_source_cmdl#set_data_directory_path()*
ddu_source_cmdl#set_data_directory_path({path})
	Set the directory used to store the command list data file
	(`cmdl.json`). {path} may contain `~` which is expanded at
	access time. Defaults to `~/.cache/ddu-source-cmdl`.

	Example: >
		call ddu_source_cmdl#set_data_directory_path(
		\   '~/.local/share/cmdl'
		\ )
<
						*ddu_source_cmdl#get_data_directory_path()*
ddu_source_cmdl#get_data_directory_path()
	Return the absolute path to the configured data directory.
	Called internally by the source and kind; rarely needed by users.

==============================================================================
DATA FORMAT					*ddu-source-cmdl-data-format*

Entries are stored as a JSON array in the data file. Each element is an
object with the following fields:

	label	String. Human-readable name shown in the ddu UI.
	command	String. Ex command executed by the `execute` action.

Example data file (`~/.cache/ddu-source-cmdl/cmdl.json`): >

	[
	  {
	    "label": "Open vimrc",
	    "command": "edit $MYVIMRC"
	  },
	  {
	    "label": "Source vimrc",
	    "command": "source $MYVIMRC"
	  },
	  {
	    "label": "Clear registers",
	    "command": "for i in range(34,122) | silent! call setreg(nr2char(i), []) | endfor"
	  }
	]
<
==============================================================================
EXAMPLES					*ddu-source-cmdl-examples*

Basic setup with ddu-ui-ff: >

	" Change data directory (optional; default: ~/.cache/ddu-source-cmdl)
	call ddu_source_cmdl#set_data_directory_path('~/.local/share/cmdl')

	" Start the cmdl picker
	call ddu#start(#{
	\   ui: 'ff',
	\   sources: [#{name: 'cmdl'}],
	\   uiOptions: #{ff: #{prompt: '> '}},
	\   kindOptions: #{
	\     cmdl: #{defaultAction: 'execute'},
	\   },
	\ })
<
Keymaps inside the ddu-ui-ff buffer: >

	" In your ddu-ui-ff keymap configuration:
	call ddu#ui#ff#execute('itemAction', #{name: 'execute'})  " <CR>
	call ddu#ui#ff#execute('itemAction', #{name: 'add'})      " a
	call ddu#ui#ff#execute('itemAction', #{name: 'edit'})     " e
	call ddu#ui#ff#execute('itemAction', #{name: 'delete'})   " d
<
Lazy.nvim + ddu.vim Lua configuration example: >

	vim.keymap.set('n', '<leader>C', function()
	  vim.fn['ddu#start']({
	    ui = 'ff',
	    sources = {{ name = 'cmdl' }},
	    kindOptions = {
	      cmdl = { defaultAction = 'execute' },
	    },
	  })
	end)
<
==============================================================================
vim:tw=78:ts=8:ft=help:norl:
